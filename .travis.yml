language: node_js
node_js:
  - "6"
  - "5"
  - "4"
  - "iojs"
before_script:
  - npm install -g gulp
script:
  - gulp test
  - istanbul cover ./node_modules/mocha/bin/_mocha --report lcovonly -- -R spec && cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js && rm -rf ./coverage
services:
  - postgresql
env:
  NODE_ENV=test
before_script:
  - psql -c 'create database school_portal_test;' -U postgres
